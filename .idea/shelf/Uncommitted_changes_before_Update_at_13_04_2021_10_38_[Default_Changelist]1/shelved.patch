Index: app/javascript/components/add_to_cart.jsx
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import React, {useEffect} from 'react'\r\nimport {useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport axios from \"axios\";\r\nimport {store} from './configureStore'\r\nimport {AiOutlinePlus, AiOutlineMinus} from \"react-icons/ai\";\r\nimport {ModalAlert} from \"./modal\";\r\n\r\nconst addToCart = ({menuItem}) => {\r\n    addToCart.propTypes = {\r\n        price: PropTypes.number\r\n    }\r\n\r\n    const [num, setNum] = useState(1);\r\n    const [openModal, setOpenModal] = useState(false);\r\n\r\n    const handleOpen = () => {\r\n        setOpenModal(true);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpenModal(false);\r\n    };\r\n\r\n    const incNum = () => {\r\n        setNum(num + 1);\r\n    }\r\n\r\n    const decNum = () => {\r\n        if (num > 0) {\r\n            setNum(num - 1);\r\n        } else {\r\n            setNum(0);\r\n        }\r\n    }\r\n\r\n    const addMultipleToCart = () => {\r\n        axios.get('/api/v1/add_to_cart',\r\n            {\r\n            params: {menu_item_id: menuItem.id, amount: num}})\r\n            .then(response => {\r\n\r\n                axios.get('/api/v1/total_amount').then(res => {\r\n                    store.dispatch({\r\n                        type: 'UPDATE_ICON',\r\n                        payload: res.data\r\n                    });\r\n                });\r\n                setNum(1)\r\n            }).catch(error => {\r\n            console.log(error);\r\n        })\r\n    };\r\n\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            setOpenModal(false);\r\n        }, 5000);\r\n        return () => clearTimeout(timer);\r\n    }, [openModal]);\r\n\r\n    let modal = null;\r\n    if(openModal) {\r\n        modal =\r\n            <div className=\"flex justify-center\">\r\n                <ModalAlert\r\n                    text=\"Varen ble lagt til i handlevogna\"\r\n                    handleClose={handleClose}\r\n                />\r\n            </div>\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"h-12 \">\r\n                {modal}\r\n            </div>\r\n           <div className=\"\">\r\n                <div className=\"flex justify-between py-2\">\r\n                    <div className=\"text-gray-800 mb-3 py-2 px-4 rounded-sm border border-purple-200 \">\r\n                        <div className=\"flex\">\r\n                            <button onClick={decNum}  className=\"\">\r\n                                <AiOutlineMinus/>\r\n                            </button>\r\n                            <p className=\"px-5 font-semibold\"> {num} </p>\r\n                            <button onClick={incNum}  className=\"\">\r\n                                <AiOutlinePlus/>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div >\r\n                    <button onClick={() => { handleOpen(); addMultipleToCart(); }}\r\n                            className=\"uppercase text-white bg-gray-700 mb-3 mt-1 py-2 w-full\">\r\n                        Legg i handlekurv\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default addToCart;\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/javascript/components/add_to_cart.jsx b/app/javascript/components/add_to_cart.jsx
--- a/app/javascript/components/add_to_cart.jsx	
+++ b/app/javascript/components/add_to_cart.jsx	
@@ -2,9 +2,9 @@
 import {useState} from 'react';
 import PropTypes from 'prop-types';
 import axios from "axios";
-import {store} from './configureStore'
+import {showModal, store, storeModal} from './configureStore'
 import {AiOutlinePlus, AiOutlineMinus} from "react-icons/ai";
-import {ModalAlert} from "./modal";
+import {ModalAlert} from "./modal/modal";
 
 const addToCart = ({menuItem}) => {
     addToCart.propTypes = {
@@ -91,7 +91,7 @@
                 </div>
 
                 <div >
-                    <button onClick={() => { handleOpen(); addMultipleToCart(); }}
+                    <button onClick={() => { handleOpen(); addMultipleToCart(); storeModal.dispatch(showModal()); }}
                             className="uppercase text-white bg-gray-700 mb-3 mt-1 py-2 w-full">
                         Legg i handlekurv
                     </button>
Index: app/javascript/components/cart_icon/cart_icon.jsx
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import React from 'react'\r\nimport {useState} from 'react';\r\nimport { RiShoppingBag2Line } from 'react-icons/ri';\r\nimport { BsFillCircleFill } from 'react-icons/bs';\r\nimport axios from \"axios\";\r\nimport {useEffect} from 'react';\r\nimport { createStore } from 'redux';\r\nimport {store} from '../configureStore'\r\n\r\n\r\nconst cartIcon = () => {\r\n    const [amount, setAmount] = useState('')\r\n\r\n    store.subscribe(() => {\r\n        console.log(store.getState())\r\n        setAmount(store.getState())\r\n    });\r\n\r\n    function GetAmount() {\r\n        axios.get('/api/v1/total_amount')\r\n            .then(response => {\r\n                console.log(response.data)\r\n                setAmount(response.data)\r\n            }).catch(error => {\r\n            console.log(error);\r\n        })\r\n    }\r\n\r\n    useEffect(() =>{\r\n        GetAmount()\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"relative\">\r\n            <div className=\"text-gray-800 lg:text-gray-100\">\r\n                <RiShoppingBag2Line size={25}/>\r\n            </div>\r\n            <div className=\"text-gray-800 absolute top-3 -right-0.5 lg:text-gray-100\">\r\n                <BsFillCircleFill />\r\n            </div>\r\n            <div className=\"text-xs text-white absolute top-3 right-0.5 lg:text-gray-900\">\r\n                {amount}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default cartIcon;\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/javascript/components/cart_icon/cart_icon.jsx b/app/javascript/components/cart_icon/cart_icon.jsx
--- a/app/javascript/components/cart_icon/cart_icon.jsx	
+++ b/app/javascript/components/cart_icon/cart_icon.jsx	
@@ -4,7 +4,6 @@
 import { BsFillCircleFill } from 'react-icons/bs';
 import axios from "axios";
 import {useEffect} from 'react';
-import { createStore } from 'redux';
 import {store} from '../configureStore'
 
 
Index: app/javascript/components/configureStore/index.jsx
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import { createStore } from 'redux';\r\n\r\nexport const countReducer = (state = 0, action) => {\r\n    switch (action.type) {\r\n        case 'INC':\r\n            return state + 1;\r\n        case 'DEC':\r\n            return state - 1;\r\n    }\r\n};\r\n\r\nexport const updateIconReducer = (state = 0, action) => {\r\n    switch(action.type) {\r\n        case 'UPDATE_ICON':\r\n            return action.payload;\r\n    }\r\n};\r\n\r\nexport const orderListReducer = (state = [], action) => {\r\n    switch(action.type) {\r\n        case 'SET_ORDERS':\r\n            return action.payload;\r\n        case 'REMOVE_ORDER':\r\n            return order => action.payload.id !== order.id;\r\n        default:\r\n            throw new Error();\r\n    }\r\n};\r\n\r\nexport const store = createStore(updateIconReducer);\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/javascript/components/configureStore/index.jsx b/app/javascript/components/configureStore/index.jsx
--- a/app/javascript/components/configureStore/index.jsx	
+++ b/app/javascript/components/configureStore/index.jsx	
@@ -1,4 +1,4 @@
-import { createStore } from 'redux';
+import {createStore} from 'redux';
 
 export const countReducer = (state = 0, action) => {
     switch (action.type) {
@@ -9,6 +9,38 @@
     }
 };
 
+export const showModal = () => {
+    return {
+        type: 'SHOW'
+    }
+};
+
+export const hideModal = () => {
+    return {
+        type: 'HIDE'
+    }
+};
+
+export const modalReducer = (state = false, action) => {
+    switch (action.type) {
+        case 'SHOW':
+            state = true
+            return state;
+        case 'HIDE':
+            state = false;
+            return state;
+        default:
+            return state;
+    }
+};
+
+export const adminItemReducer = (state, action) => {
+    switch(action.type) {
+        case 'UPDATE_ITEM':
+            return action.payload;
+    }
+};
+
 export const updateIconReducer = (state = 0, action) => {
     switch(action.type) {
         case 'UPDATE_ICON':
@@ -28,3 +60,6 @@
 };
 
 export const store = createStore(updateIconReducer);
+export const storeModal = createStore(modalReducer);
+export const storeAdmin = createStore(adminItemReducer);
+
